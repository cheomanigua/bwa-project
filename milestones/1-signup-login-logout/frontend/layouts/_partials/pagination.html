{{/*  pagination.html – receives $pag  */}}
{{ if gt .TotalPages 1 }}
<nav class="pagination" aria-label="Pagination">
  <ul class="pagination-list">

    {{/* Prev */}}
    {{ with .Prev }}
      <li class="page-item"><a href="{{ .URL }}" class="page-link">Prev</a></li>
    {{ else }}
      <li class="page-item disabled"><span class="page-link">Prev</span></li>
    {{ end }}

    {{/* Smart page numbers */}}
    {{ $start := cond (gt .PageNumber 4) (sub .PageNumber 2) 1 }}
    {{ $end   := cond (lt (add .PageNumber 3) .TotalPages) (add .PageNumber 2) .TotalPages }}

    {{ if gt $start 1 }}
      <li class="page-item"><a href="{{ .First.URL }}" class="page-link">1</a></li>
      {{ if gt $start 2 }}<li class="page-item disabled"><span class="page-link">…</span></li>{{ end }}
    {{ end }}

    {{ range .Pagers }}
      {{ if and (ge .PageNumber $start) (le .PageNumber $end) }}
        <li class="page-item {{ if eq .PageNumber $.PageNumber }}active{{ end }}">
          <a href="{{ .URL }}" class="page-link">{{ .PageNumber }}</a>
        </li>
      {{ end }}
    {{ end }}

    {{ if lt $end .TotalPages }}
      {{ if lt (add $end 1) .TotalPages }}<li class="page-item disabled"><span class="page-link">…</span></li>{{ end }}
      <li class="page-item"><a href="{{ .Last.URL }}" class="page-link">{{ .TotalPages }}</a></li>
    {{ end }}

    {{/* Next */}}
    {{ with .Next }}
      <li class="page-item"><a href="{{ .URL }}" class="page-link">Next</a></li>
    {{ else }}
      <li class="page-item disabled"><span class="page-link">Next</span></li>
    {{ end }}

  </ul>
</nav>
{{ end }}
